{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prcue\\\\OneDrive\\\\Curso 4\\\\TFG GITT\\\\5. Desarrollo\\\\3. Frontend\\\\frontend_v3\\\\src\\\\components\\\\Upload.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useAuth } from \"./AuthContext\";\nimport { MDBInput, MDBBtn, MDBTextArea } from \"mdb-react-ui-kit\";\nimport documentProofABI from \"../assets/documentProofABI.json\";\nimport HashGenerator from \"./HashGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CONTRACT_ADDRESS = \"0xb9a219631aed55ebc3d998f17c3840b7ec39c0cc\"; // HAY QUE MOVERLO A OTRO SITIO\n\nconst Upload = () => {\n  _s();\n  const {\n    currentUser\n  } = useAuth();\n  const [formData, setFormData] = useState({\n    _hash: \"\",\n    _size: 0,\n    _ownerName: \"\",\n    _title: \"\",\n    _description: \"\"\n  });\n  const setHash = hash => {\n    setFormData({\n      ...formData,\n      _hash: hash\n    });\n  };\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault(); // Prevents default refresh by the browser\n    console.log(formData);\n    try {\n      const provider = new ethers.BrowserProvider(window.ethereum);\n      const signer = await provider.getSigner();\n      const contract = new ethers.Contract(CONTRACT_ADDRESS, documentProofABI, signer);\n      const tx = await contract.newInstance(formData._hash, formData._size, formData._ownerName, formData._title, formData._description);\n      console.log(\"Transaction hash:\", tx.hash);\n      await tx.wait();\n      console.log(\"Transaction confirmed.\");\n      alert(\"Transaction confirmed! Information uploaded to the blockchain\");\n    } catch (error) {\n      console.error(\"Error uploading:\", error);\n      alert(\"Error uploading to the blockchain\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center justify-content-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(MDBCard, {\n        style: {\n          maxWidth: \"45rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(MDBCardHeader, {\n          color: \"dark\",\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Upload a new instance into the blockchain\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBCardBody, {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Be careful when uploading information to the blockchain. It will be stored forever and it will be public.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center justify-content-center mt-5 mb-3\",\n      children: /*#__PURE__*/_jsxDEV(HashGenerator, {\n        setHashParent: setHash\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center justify-content-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"col-lg-4 col-md-10 col-sm-10 col-10\",\n        children: [/*#__PURE__*/_jsxDEV(MDBInput, {\n          className: \"mb-4\",\n          type: \"text\",\n          id: \"_hash\",\n          name: \"_hash\",\n          label: \"Hash\",\n          maxLength: 66 // bytes32 length in hexadecimal\n          ,\n          pattern: \"^0x[a-fA-F0-9]{64}$\" // Ensure it starts with 0x and followed by 64 hexadecimal characters\n          ,\n          value: formData._hash,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          type: \"number\",\n          className: \"mb-4\",\n          id: \"_size\",\n          name: \"_size\",\n          label: \"Size\",\n          value: formData._size,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          type: \"text\",\n          className: \"mb-4\",\n          id: \"_ownerName\",\n          name: \"_ownerName\",\n          label: \"Owner\",\n          value: formData._ownerName,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBInput, {\n          type: \"text\",\n          className: \"mb-4\",\n          id: \"_title\",\n          name: \"_title\",\n          label: \"Title\",\n          value: formData._title,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBTextArea, {\n          className: \"mb-4\",\n          id: \"_description\",\n          name: \"_description\",\n          rows: 4,\n          label: \"Description\",\n          value: formData._description,\n          onChange: handleChange,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(MDBBtn, {\n          type: \"submit\",\n          className: \"mb-4\",\n          block: true,\n          children: \"Upload instance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(Upload, \"Kv92a2qFVMn1G5z+4/WBc3dIqd4=\", false, function () {\n  return [useAuth];\n});\n_c = Upload;\nexport default Upload;\nvar _c;\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"names":["React","useState","ethers","useAuth","MDBInput","MDBBtn","MDBTextArea","documentProofABI","HashGenerator","jsxDEV","_jsxDEV","Fragment","_Fragment","CONTRACT_ADDRESS","Upload","_s","currentUser","formData","setFormData","_hash","_size","_ownerName","_title","_description","setHash","hash","handleChange","e","target","name","value","handleSubmit","preventDefault","console","log","provider","BrowserProvider","window","ethereum","signer","getSigner","contract","Contract","tx","newInstance","wait","alert","error","children","className","MDBCard","style","maxWidth","MDBCardHeader","color","fileName","_jsxFileName","lineNumber","columnNumber","MDBCardBody","setHashParent","onSubmit","type","id","label","maxLength","pattern","onChange","required","rows","block","_c","$RefreshReg$"],"sources":["C:/Users/prcue/OneDrive/Curso 4/TFG GITT/5. Desarrollo/3. Frontend/frontend_v3/src/components/Upload.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { MDBInput, MDBBtn, MDBTextArea } from \"mdb-react-ui-kit\";\r\nimport documentProofABI from \"../assets/documentProofABI.json\";\r\nimport HashGenerator from \"./HashGenerator\";\r\n\r\nconst CONTRACT_ADDRESS = \"0xb9a219631aed55ebc3d998f17c3840b7ec39c0cc\"; // HAY QUE MOVERLO A OTRO SITIO\r\n\r\nconst Upload = () => {\r\n  const { currentUser } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    _hash: \"\",\r\n    _size: 0,\r\n    _ownerName: \"\",\r\n    _title: \"\",\r\n    _description: \"\",\r\n  });\r\n\r\n  const setHash = (hash) => {\r\n    setFormData({ ...formData, _hash: hash });\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); // Prevents default refresh by the browser\r\n    console.log(formData);\r\n    try {\r\n      const provider = new ethers.BrowserProvider(window.ethereum);\r\n      const signer = await provider.getSigner();\r\n      const contract = new ethers.Contract(\r\n        CONTRACT_ADDRESS,\r\n        documentProofABI,\r\n        signer\r\n      );\r\n\r\n      const tx = await contract.newInstance(\r\n        formData._hash,\r\n        formData._size,\r\n        formData._ownerName,\r\n        formData._title,\r\n        formData._description\r\n      );\r\n      console.log(\"Transaction hash:\", tx.hash);\r\n\r\n      await tx.wait();\r\n      console.log(\"Transaction confirmed.\");\r\n      alert(\"Transaction confirmed! Information uploaded to the blockchain\");\r\n    } catch (error) {\r\n      console.error(\"Error uploading:\", error);\r\n      alert(\"Error uploading to the blockchain\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"d-flex align-items-center justify-content-center mt-5\">\r\n        <MDBCard style={{ maxWidth: \"45rem\" }}>\r\n          <MDBCardHeader color=\"dark\">\r\n            <h4>Upload a new instance into the blockchain</h4>\r\n          </MDBCardHeader>\r\n          <MDBCardBody>\r\n            <p>\r\n              Be careful when uploading information to the blockchain. It will\r\n              be stored forever and it will be public.\r\n            </p>\r\n          </MDBCardBody>\r\n        </MDBCard>\r\n      </div>\r\n      <div className=\"d-flex align-items-center justify-content-center mt-5 mb-3\">\r\n        <HashGenerator setHashParent={setHash} />\r\n      </div>\r\n      <div className=\"d-flex align-items-center justify-content-center mt-5\">\r\n        <form\r\n          onSubmit={handleSubmit}\r\n          className=\"col-lg-4 col-md-10 col-sm-10 col-10\"\r\n        >\r\n          <MDBInput\r\n            className=\"mb-4\"\r\n            type=\"text\"\r\n            id=\"_hash\"\r\n            name=\"_hash\"\r\n            label=\"Hash\"\r\n            maxLength={66} // bytes32 length in hexadecimal\r\n            pattern=\"^0x[a-fA-F0-9]{64}$\" // Ensure it starts with 0x and followed by 64 hexadecimal characters\r\n            value={formData._hash}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <MDBInput\r\n            type=\"number\"\r\n            className=\"mb-4\"\r\n            id=\"_size\"\r\n            name=\"_size\"\r\n            label=\"Size\"\r\n            value={formData._size}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <MDBInput\r\n            type=\"text\"\r\n            className=\"mb-4\"\r\n            id=\"_ownerName\"\r\n            name=\"_ownerName\"\r\n            label=\"Owner\"\r\n            value={formData._ownerName}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <MDBInput\r\n            type=\"text\"\r\n            className=\"mb-4\"\r\n            id=\"_title\"\r\n            name=\"_title\"\r\n            label=\"Title\"\r\n            value={formData._title}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n          <MDBTextArea\r\n            className=\"mb-4\"\r\n            id=\"_description\"\r\n            name=\"_description\"\r\n            rows={4}\r\n            label=\"Description\"\r\n            value={formData._description}\r\n            onChange={handleChange}\r\n            required\r\n          />\r\n\r\n          <MDBBtn type=\"submit\" className=\"mb-4\" block>\r\n            Upload instance\r\n          </MDBBtn>\r\n        </form>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Upload;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}