{"ast":null,"code":"import _slicedToArray from\"C:/Users/prcue/OneDrive/Curso 4/TFG GITT/5. Desarrollo/3. Frontend/frontend_v3/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState,useContext,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext();export var useAuth=function useAuth(){return useContext(AuthContext);};export var AuthProvider=function AuthProvider(_ref){var children=_ref.children;useEffect(function(){// This useEffect will run only once, when the component is mounted\nvar token=localStorage.getItem(\"access_token\");var savedUsername=localStorage.getItem(\"username\");if(token&&savedUsername){setCurrentUser(savedUsername);}},[]);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var setAuthDetails=function setAuthDetails(user,tokens){setCurrentUser(user);localStorage.setItem(\"username\",user);localStorage.setItem(\"access_token\",tokens.access);localStorage.setItem(\"refresh_token\",tokens.refresh);};var logout=function logout(){setCurrentUser(null);// This clears the current user\nlocalStorage.removeItem(\"access_token\");localStorage.removeItem(\"refresh_token\");};var handleLogout=function handleLogout(e){e.preventDefault();// prevent default behavior\ne.stopPropagation();// stop event propagation\nlogout();};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{currentUser:currentUser,setAuthDetails:setAuthDetails,setCurrentUser:setCurrentUser,logout:logout,handleLogout:handleLogout},children:children});};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","jsx","_jsx","AuthContext","useAuth","AuthProvider","_ref","children","token","localStorage","getItem","savedUsername","setCurrentUser","_useState","_useState2","_slicedToArray","currentUser","setAuthDetails","user","tokens","setItem","access","refresh","logout","removeItem","handleLogout","e","preventDefault","stopPropagation","Provider","value"],"sources":["C:/Users/prcue/OneDrive/Curso 4/TFG GITT/5. Desarrollo/3. Frontend/frontend_v3/src/components/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from \"react\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  useEffect(() => {\r\n    // This useEffect will run only once, when the component is mounted\r\n    const token = localStorage.getItem(\"access_token\");\r\n    const savedUsername = localStorage.getItem(\"username\");\r\n    if (token && savedUsername) {\r\n      setCurrentUser(savedUsername);\r\n    }\r\n  }, []);\r\n\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n\r\n  const setAuthDetails = (user, tokens) => {\r\n    setCurrentUser(user);\r\n    localStorage.setItem(\"username\", user);\r\n    localStorage.setItem(\"access_token\", tokens.access);\r\n    localStorage.setItem(\"refresh_token\", tokens.refresh);\r\n  };\r\n\r\n  const logout = () => {\r\n    setCurrentUser(null); // This clears the current user\r\n    localStorage.removeItem(\"access_token\");\r\n    localStorage.removeItem(\"refresh_token\");\r\n  };\r\n\r\n  const handleLogout = (e) => {\r\n    e.preventDefault(); // prevent default behavior\r\n    e.stopPropagation(); // stop event propagation\r\n\r\n    logout();\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        currentUser,\r\n        setAuthDetails,\r\n        setCurrentUser,\r\n        logout,\r\n        handleLogout,\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"oKAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,UAAU,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9E,GAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,IAAM,CAAAO,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAA,CAAS,CAC3B,MAAO,CAAAL,UAAU,CAACI,WAAW,CAAC,CAChC,CAAC,CAED,MAAO,IAAM,CAAAE,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACrCP,SAAS,CAAC,UAAM,CACd;AACA,GAAM,CAAAQ,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAClD,GAAM,CAAAC,aAAa,CAAGF,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC,CACtD,GAAIF,KAAK,EAAIG,aAAa,CAAE,CAC1BC,cAAc,CAACD,aAAa,CAAC,CAC/B,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,IAAAE,SAAA,CAAsCf,QAAQ,CAAC,IAAI,CAAC,CAAAgB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7CG,WAAW,CAAAF,UAAA,IAAEF,cAAc,CAAAE,UAAA,IAElC,GAAM,CAAAG,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,IAAI,CAAEC,MAAM,CAAK,CACvCP,cAAc,CAACM,IAAI,CAAC,CACpBT,YAAY,CAACW,OAAO,CAAC,UAAU,CAAEF,IAAI,CAAC,CACtCT,YAAY,CAACW,OAAO,CAAC,cAAc,CAAED,MAAM,CAACE,MAAM,CAAC,CACnDZ,YAAY,CAACW,OAAO,CAAC,eAAe,CAAED,MAAM,CAACG,OAAO,CAAC,CACvD,CAAC,CAED,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnBX,cAAc,CAAC,IAAI,CAAC,CAAE;AACtBH,YAAY,CAACe,UAAU,CAAC,cAAc,CAAC,CACvCf,YAAY,CAACe,UAAU,CAAC,eAAe,CAAC,CAC1C,CAAC,CAED,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,CAAC,CAAK,CAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAE;AACpBD,CAAC,CAACE,eAAe,CAAC,CAAC,CAAE;AAErBL,MAAM,CAAC,CAAC,CACV,CAAC,CAED,mBACErB,IAAA,CAACC,WAAW,CAAC0B,QAAQ,EACnBC,KAAK,CAAE,CACLd,WAAW,CAAXA,WAAW,CACXC,cAAc,CAAdA,cAAc,CACdL,cAAc,CAAdA,cAAc,CACdW,MAAM,CAANA,MAAM,CACNE,YAAY,CAAZA,YACF,CAAE,CAAAlB,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}