{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\prcue\\\\OneDrive\\\\Curso 4\\\\TFG GITT\\\\5. Desarrollo\\\\3. Frontend\\\\frontend_v2\\\\src\\\\components\\\\Dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from \"react\";\nimport { useAuth } from \"./AuthContext\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { fetchHashes, refreshToken } from \"./apiServices\"; // Import new functions\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Dashboard = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    currentUser\n  } = useAuth();\n  useEffect(() => {\n    if (!currentUser) return;\n    const fetchData = async () => {\n      try {\n        const data = await fetchHashes();\n        console.log(data);\n      } catch (error) {\n        if (error.response && error.response.status === 401) {\n          try {\n            const tokenData = await refreshToken();\n            localStorage.setItem(\"access_token\", tokenData.access);\n            fetchData();\n          } catch (refreshError) {\n            if (refreshError.response && (refreshError.response.status === 401 || refreshError.response.status === 403)) {\n              navigate(\"/login\");\n            } else {\n              alert(`Error refreshing token: ${JSON.stringify(refreshError.response.data)}`);\n            }\n          }\n        } else {\n          alert(`Error fetching data: ${JSON.stringify(error.response.data)}`);\n        }\n      }\n    };\n    fetchData();\n  }, [currentUser, navigate]);\n  return currentUser ? /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) : notLoggedIn();\n};\n_s(Dashboard, \"kh8E0Q5DygnW3atEwcQ2cwLRb3I=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = Dashboard;\nfunction notLoggedIn() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center justify-content-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Not logged in!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex align-items-center justify-content-center mt-2\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"You need to \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 23\n        }, this), \" to see this page.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useAuth","useNavigate","Link","fetchHashes","refreshToken","Fragment","_Fragment","jsxDEV","_jsxDEV","Dashboard","_s","navigate","currentUser","fetchData","data","console","log","error","response","status","tokenData","localStorage","setItem","access","refreshError","alert","JSON","stringify","notLoggedIn","_c","children","className","fileName","_jsxFileName","lineNumber","columnNumber","to","$RefreshReg$"],"sources":["C:/Users/prcue/OneDrive/Curso 4/TFG GITT/5. Desarrollo/3. Frontend/frontend_v2/src/components/Dashboard.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\nimport { useNavigate, Link } from \"react-router-dom\";\r\nimport { fetchHashes, refreshToken } from \"./apiServices\"; // Import new functions\r\n\r\nconst Dashboard = () => {\r\n  const navigate = useNavigate();\r\n  const { currentUser } = useAuth();\r\n\r\n  useEffect(() => {\r\n    if (!currentUser) return;\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        const data = await fetchHashes();\r\n        console.log(data);\r\n      } catch (error) {\r\n        if (error.response && error.response.status === 401) {\r\n          try {\r\n            const tokenData = await refreshToken();\r\n            localStorage.setItem(\"access_token\", tokenData.access);\r\n            fetchData();\r\n          } catch (refreshError) {\r\n            if (\r\n              refreshError.response &&\r\n              (refreshError.response.status === 401 ||\r\n                refreshError.response.status === 403)\r\n            ) {\r\n              navigate(\"/login\");\r\n            } else {\r\n              alert(\r\n                `Error refreshing token: ${JSON.stringify(\r\n                  refreshError.response.data\r\n                )}`\r\n              );\r\n            }\r\n          }\r\n        } else {\r\n          alert(`Error fetching data: ${JSON.stringify(error.response.data)}`);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [currentUser, navigate]);\r\n\r\n  return currentUser ? <></> : notLoggedIn();\r\n};\r\n\r\nfunction notLoggedIn() {\r\n  return (\r\n    <>\r\n      <div className=\"d-flex align-items-center justify-content-center mt-5\">\r\n        <h1>Not logged in!</h1>\r\n      </div>\r\n      <div className=\"d-flex align-items-center justify-content-center mt-2\">\r\n        <p>\r\n          You need to <Link to=\"/login\">log in</Link> to see this page.\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}