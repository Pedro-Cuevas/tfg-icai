{"ast":null,"code":"var _s = $RefreshSig$();\n// useHashes.js\n\nimport { useState, useEffect } from \"react\";\nimport { fetchHashes, refreshToken } from \"./apiServices\";\nimport { useNavigate } from \"react-router-dom\";\nconst useHashes = currentUser => {\n  _s();\n  const navigate = useNavigate();\n  const [hashData, setHashData] = useState(null);\n  useEffect(() => {\n    if (!currentUser) return;\n    const fetchData = async () => {\n      try {\n        const data = await fetchHashes();\n        setHashData(data);\n      } catch (error) {\n        handleFetchError(error);\n      }\n    };\n    const handleFetchError = async error => {\n      if (error.response && error.response.status === 401) {\n        try {\n          const tokenData = await refreshToken();\n          localStorage.setItem(\"access_token\", tokenData.access);\n          fetchData();\n        } catch (refreshError) {\n          if (refreshError.response && (refreshError.response.status === 401 || refreshError.response.status === 403)) {\n            navigate(\"/login\");\n          } else {\n            alert(`Error refreshing token: ${JSON.stringify(refreshError.response.data)}`);\n          }\n        }\n      } else {\n        alert(`Error fetching data: ${JSON.stringify(error.response.data)}`);\n      }\n    };\n    fetchData();\n  }, [currentUser, navigate]);\n  return [hashData, setHashData];\n};\n_s(useHashes, \"P5Qa8Lnkh2e+AVjUfsXcOiG2sTQ=\", false, function () {\n  return [useNavigate];\n});\nexport default useHashes;","map":{"version":3,"names":["useState","useEffect","fetchHashes","refreshToken","useNavigate","useHashes","currentUser","_s","navigate","hashData","setHashData","fetchData","data","error","handleFetchError","response","status","tokenData","localStorage","setItem","access","refreshError","alert","JSON","stringify"],"sources":["C:/Users/prcue/OneDrive/Curso 4/TFG GITT/5. Desarrollo/3. Frontend/frontend_v2/src/components/Dashboard.js"],"sourcesContent":["// useHashes.js\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { fetchHashes, refreshToken } from \"./apiServices\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst useHashes = (currentUser) => {\r\n  const navigate = useNavigate();\r\n  const [hashData, setHashData] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!currentUser) return;\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        const data = await fetchHashes();\r\n        setHashData(data);\r\n      } catch (error) {\r\n        handleFetchError(error);\r\n      }\r\n    };\r\n\r\n    const handleFetchError = async (error) => {\r\n      if (error.response && error.response.status === 401) {\r\n        try {\r\n          const tokenData = await refreshToken();\r\n          localStorage.setItem(\"access_token\", tokenData.access);\r\n          fetchData();\r\n        } catch (refreshError) {\r\n          if (\r\n            refreshError.response &&\r\n            (refreshError.response.status === 401 ||\r\n              refreshError.response.status === 403)\r\n          ) {\r\n            navigate(\"/login\");\r\n          } else {\r\n            alert(\r\n              `Error refreshing token: ${JSON.stringify(\r\n                refreshError.response.data\r\n              )}`\r\n            );\r\n          }\r\n        }\r\n      } else {\r\n        alert(`Error fetching data: ${JSON.stringify(error.response.data)}`);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [currentUser, navigate]);\r\n\r\n  return [hashData, setHashData];\r\n};\r\n\r\nexport default useHashes;\r\n"],"mappings":";AAAA;;AAEA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,EAAEC,YAAY,QAAQ,eAAe;AACzD,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,MAAMC,SAAS,GAAIC,WAAW,IAAK;EAAAC,EAAA;EACjC,MAAMC,QAAQ,GAAGJ,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACK,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,IAAI,CAAC;EAE9CC,SAAS,CAAC,MAAM;IACd,IAAI,CAACK,WAAW,EAAE;IAElB,MAAMK,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,IAAI,GAAG,MAAMV,WAAW,CAAC,CAAC;QAChCQ,WAAW,CAACE,IAAI,CAAC;MACnB,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,gBAAgB,CAACD,KAAK,CAAC;MACzB;IACF,CAAC;IAED,MAAMC,gBAAgB,GAAG,MAAOD,KAAK,IAAK;MACxC,IAAIA,KAAK,CAACE,QAAQ,IAAIF,KAAK,CAACE,QAAQ,CAACC,MAAM,KAAK,GAAG,EAAE;QACnD,IAAI;UACF,MAAMC,SAAS,GAAG,MAAMd,YAAY,CAAC,CAAC;UACtCe,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEF,SAAS,CAACG,MAAM,CAAC;UACtDT,SAAS,CAAC,CAAC;QACb,CAAC,CAAC,OAAOU,YAAY,EAAE;UACrB,IACEA,YAAY,CAACN,QAAQ,KACpBM,YAAY,CAACN,QAAQ,CAACC,MAAM,KAAK,GAAG,IACnCK,YAAY,CAACN,QAAQ,CAACC,MAAM,KAAK,GAAG,CAAC,EACvC;YACAR,QAAQ,CAAC,QAAQ,CAAC;UACpB,CAAC,MAAM;YACLc,KAAK,CACF,2BAA0BC,IAAI,CAACC,SAAS,CACvCH,YAAY,CAACN,QAAQ,CAACH,IACxB,CAAE,EACJ,CAAC;UACH;QACF;MACF,CAAC,MAAM;QACLU,KAAK,CAAE,wBAAuBC,IAAI,CAACC,SAAS,CAACX,KAAK,CAACE,QAAQ,CAACH,IAAI,CAAE,EAAC,CAAC;MACtE;IACF,CAAC;IAEDD,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACL,WAAW,EAAEE,QAAQ,CAAC,CAAC;EAE3B,OAAO,CAACC,QAAQ,EAAEC,WAAW,CAAC;AAChC,CAAC;AAACH,EAAA,CA9CIF,SAAS;EAAA,QACID,WAAW;AAAA;AA+C9B,eAAeC,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}